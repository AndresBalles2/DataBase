<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro - Farmacia Salud Plus</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="h-screen flex items-center justify-center bg-gradient-to-r from-gray-100 to-gray-400">
    <div class="bg-white p-8 rounded-lg shadow-2xl w-96 border border-gray-200 backdrop-blur-md bg-opacity-80">
        <h2 class="text-3xl font-bold text-center text-blue-600 mb-6">Registro</h2>
        <form id="registerForm" class="space-y-4">
            <div class="relative">
                <input type="text" id="nombre" class="peer w-full p-4 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-300 outline-none text-lg placeholder-transparent" placeholder=" " required>
                <label for="nombre" class="absolute left-3 top-3 text-gray-500 text-lg transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-lg peer-placeholder-shown:text-gray-400 peer-focus:top-1 peer-focus:text-sm peer-focus:text-blue-600 peer-valid:top-1 peer-valid:text-sm peer-valid:text-blue-600 bg-white px-1">Nombre</label>
            </div>            
            <div class="relative">
                <input type="text" id="apellido" class="peer w-full p-4 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-300 outline-none text-lg placeholder-transparent" placeholder=" " required>
                <label for="apellido" class="absolute left-3 top-3 text-gray-500 text-lg transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-lg peer-placeholder-shown:text-gray-400 peer-focus:top-1 peer-focus:text-sm peer-focus:text-blue-600 peer-valid:top-1 peer-valid:text-sm peer-valid:text-blue-600 bg-white px-1">Apellido</label>
            </div>
            
            <div class="relative">
                <input type="email" id="email" class="peer w-full p-4 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-300 outline-none text-lg placeholder-transparent" placeholder=" " required>
                <label for="email" class="absolute left-3 top-3 text-gray-500 text-lg transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-lg peer-placeholder-shown:text-gray-400 peer-focus:top-1 peer-focus:text-sm peer-focus:text-blue-600 peer-valid:top-1 peer-valid:text-sm peer-valid:text-blue-600 bg-white px-1">Correo Electrónico</label>
            </div>
            
            <div class="relative">
                <input type="text" id="telefono" class="peer w-full p-4 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-300 outline-none text-lg placeholder-transparent" placeholder=" " required>
                <label for="telefono" class="absolute left-3 top-3 text-gray-500 text-lg transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-lg peer-placeholder-shown:text-gray-400 peer-focus:top-1 peer-focus:text-sm peer-focus:text-blue-600 peer-valid:top-1 peer-valid:text-sm peer-valid:text-blue-600 bg-white px-1">Teléfono</label>
            </div>
            
            <div class="relative">
                <select id="tipo" class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-300 outline-none text-lg bg-white appearance-none cursor-pointer" required>
                    <option value="" disabled selected hidden>Selecciona un tipo</option>
                    <option value="cliente" class="text-gray-600">Cliente</option>
                    <option value="admin" class="text-gray-600">Administrador</option>
                </select>
                <label for="tipo" class="absolute left-3 top-[-10px] text-sm text-blue-600 bg-white px-1">Tipo</label>
            </div>
            
            <div class="relative">
                <input type="password" id="clave" class="peer w-full p-4 border border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-300 outline-none text-lg placeholder-transparent" placeholder=" " required>
                <label for="clave" class="absolute left-3 top-3 text-gray-500 text-lg transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-lg peer-placeholder-shown:text-gray-400 peer-focus:top-1 peer-focus:text-sm peer-focus:text-blue-600 peer-valid:top-1 peer-valid:text-sm peer-valid:text-blue-600 bg-white px-1">Contraseña</label>
            </div>
            
            <button type="submit" class="w-full bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 text-lg transition-all">Registrarse</button>
        </form>
        <p class="text-center text-gray-600 mt-4">¿Ya tienes una cuenta? <a href="login.html" class="text-blue-600 font-semibold">Inicia sesión</a></p>
    </div>

    <script>
        document.getElementById("registerForm").addEventListener("submit", async function(event) {
            event.preventDefault();
            
            const nombre = document.getElementById("nombre").value;
            const apellido = document.getElementById("apellido").value;
            const email = document.getElementById("email").value;
            const telefono = document.getElementById("telefono").value;
            const tipo = document.getElementById("tipo").value;
            const clave = document.getElementById("clave").value;

            const response = await fetch("http://localhost:5100/users/register", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ nombre, apellido, email, telefono, tipo, clave })
            });

            const data = await response.json();
            if (response.ok) {
                alert("Registro exitoso. Ahora puedes iniciar sesión.");
                window.location.href = "login.html";
            } else {
                alert("Error: " + data.error);
            }
        });
    </script>
</body>
</html>
